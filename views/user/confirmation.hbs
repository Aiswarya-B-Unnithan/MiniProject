 {{>userheader}}
 {{log CouponDiscountAmount}}
 <style>
   

.confirmation-container{
  align-items: center;
    width: 100%;
    height:100vh;
}

.card {
    background-color: #c1e8ed;
    width: 50%;
    padding: 10px;
    border: 1px solid #eee
}

.inner-card {
    background: #fff;
    padding: 10px;
    border-radius: 5px
}



.btn:focus {
    color: #fff;
    background-color: #025ce2;
    border-color: #0257d5;
    box-shadow: none
}
</style>
  </head>
   {{#if message}}
    <p style="text-align: center;color:red;font-size:larger">{{message}}</p>
    <div class="container">
      <button type="button" onclick="goBackToCart()">Go Back to Cart</button>
    </div>
  {{else}}
    <div class="container confirmation-container mt-2 mb-5 d-flex justify-content-center align-items-center">
      <div class="card w-100 h-50">
          <h2 style="text-align:center;">Choose Payment Method</h2>

        <div class="inner-card h-100">
           <div class="d-flex justify-content-between align-items-center mt-3 px-2">
            <h4>Total: â‚¹{{cartTotal}} </h4> 
      </div>
      <div class="d-flex justify-content-between align-items-center mt-3 px-2">
           
           
           {{#if (gt discountedTotal 0)}}
            <h4 class="mb-1">Discounted Total: ${{discountedTotal}}</h4>
          {{/if}}
      </div>
    
      <form id="paymentForm" method="get">
              <div class="d-flex justify-content-between align-items-center mt-3 px-2">
        <label for="paymentMethod">Select Payment Method:</label>
        <select id="paymentMethod" name="paymentMethod">
          <option value="cashOnDelivery">Cash on Delivery</option>
          <option value="walletPayment">Wallet</option>
          <option value="stripePayment">StripePayment</option>
        </select>
        <input type="hidden" name="discountedTotal" value="{{discountedTotal}}">
        <button class="btn" type="button" onclick="redirectPayment()">Make Payment</button>
        <button type="button" class="btn" onclick="goBackToCart()">Go Back to Cart</button>
        </div>
      </form>
      </div>
      </div>
    </div>
  {{/if}}
<script>
    function goBackToCart() {
    window.location.href = "/cart"; 
    
  }
    function redirectPayment() {
        const paymentMethod = document.getElementById("paymentMethod").value;
        console.log("paymentMethod",paymentMethod)
        const discountedTotal = "{{discountedTotal}}"; 
        const CouponDiscountAmount={{CouponDiscountAmount}}
const cartTotal='{{cartTotal}}'
        if (paymentMethod === "cashOnDelivery") {
            window.location.href = `/cod/cashOnDelivery?discountedTotal=${discountedTotal}&cartTotal=${cartTotal}&paymentMethod=${paymentMethod}&CouponDiscountAmount=${CouponDiscountAmount}`;
        } else if (paymentMethod === "walletPayment") {
            window.location.href = `/wallet/walletPayment?discountedTotal=${discountedTotal}&cartTotal=${cartTotal}&paymentMethod=${paymentMethod}&CouponDiscountAmount=${CouponDiscountAmount}`;
        } else if (paymentMethod === "stripePayment") {
            window.location.href = `/stripe/onlinePayment?discountedTotal=${discountedTotal}&cartTotal=${cartTotal}&paymentMethod=${paymentMethod}&CouponDiscountAmount=${CouponDiscountAmount}`;
        }
    }
</script>

   {{>userfooter}}